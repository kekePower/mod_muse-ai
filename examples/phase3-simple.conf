# mod_muse-ai Phase 3 Simple Configuration
# This configuration uses only the implemented Phase 3 directives

LoadModule muse_ai_module modules/mod_muse_ai.so

# Phase 2: Basic Configuration
MuseAiEndpoint "http://127.0.0.1:8080/v1"
MuseAiModel "inception/mercury-small"
MuseAiApiKey "fbdc587362f1a1400214f03cc6ecfe0797ec2f54149722e8157603d949c0f858"
MuseAiTimeout 300
MuseAiDebug On
MuseAiStreaming On

# Phase 3: Advanced Features (Implemented)
MuseAiPoolMaxConnections 20
MuseAiCacheEnable On
MuseAiCacheTTL 300
MuseAiRateLimitEnable On
MuseAiRateLimitRPM 120
MuseAiMetricsEnable On
MuseAiReasoningModelPattern "deepseek-r1"
MuseAiBackendEndpoint "http://127.0.0.1:8080/v1"
MuseAiLoadBalanceMethod "round_robin"
MuseAiStreamingBufferSize 8192
MuseAiSecurityMaxRequestSize 1048576

# Virtual Host Configuration
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html
    
    # AI Handler
    <Location "/ai">
        SetHandler muse-ai-handler
        Require all granted
    </Location>
    
    # Phase 3: Metrics Handler
    <Location "/metrics">
        SetHandler muse-ai-metrics
        Require all granted
    </Location>
    
    # Phase 3: Health Check Handler
    <Location "/health">
        SetHandler muse-ai-health
        Require all granted
    </Location>
    
    LogLevel debug
    ErrorLog /var/log/httpd/muse-ai.error_log
    CustomLog /var/log/httpd/muse-ai.access_log combined
</VirtualHost>
